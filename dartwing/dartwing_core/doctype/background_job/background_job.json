{
	"actions": [],
	"autoname": "naming_series:",
	"creation": "2025-12-15 00:00:00.000000",
	"doctype": "DocType",
	"engine": "InnoDB",
	"field_order": [
		"naming_series",
		"job_type",
		"organization",
		"owner_user",
		"column_break_1",
		"status",
		"priority",
		"depends_on",
		"progress_section",
		"progress",
		"progress_message",
		"column_break_progress",
		"output_reference",
		"error_section",
		"error_message",
		"error_type",
		"retry_section",
		"retry_count",
		"max_retries",
		"column_break_retry",
		"next_retry_at",
		"parameters_section",
		"input_parameters",
		"job_hash",
		"timestamps_section",
		"timeout_seconds",
		"created_at",
		"started_at",
		"column_break_timestamps",
		"completed_at",
		"canceled_at",
		"canceled_by"
	],
	"fields": [
		{
			"fieldname": "naming_series",
			"fieldtype": "Select",
			"label": "Naming Series",
			"options": "JOB-.YYYY.-",
			"default": "JOB-.YYYY.-",
			"hidden": 1
		},
		{
			"fieldname": "job_type",
			"fieldtype": "Link",
			"in_list_view": 1,
			"in_standard_filter": 1,
			"label": "Job Type",
			"options": "Job Type",
			"reqd": 1
		},
		{
			"fieldname": "organization",
			"fieldtype": "Link",
			"in_list_view": 1,
			"in_standard_filter": 1,
			"label": "Organization",
			"options": "Organization",
			"reqd": 1
		},
		{
			"fieldname": "owner_user",
			"fieldtype": "Link",
			"label": "Owner User",
			"options": "User",
			"reqd": 1,
			"description": "User who submitted the job"
		},
		{
			"fieldname": "column_break_1",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "status",
			"fieldtype": "Select",
			"in_list_view": 1,
			"in_standard_filter": 1,
			"label": "Status",
			"options": "Pending\nQueued\nRunning\nCompleted\nFailed\nDead Letter\nCanceled\nTimed Out",
			"default": "Pending",
			"reqd": 1
		},
		{
			"fieldname": "priority",
			"fieldtype": "Select",
			"in_standard_filter": 1,
			"label": "Priority",
			"options": "Low\nNormal\nHigh\nCritical",
			"default": "Normal",
			"reqd": 1
		},
		{
			"fieldname": "depends_on",
			"fieldtype": "Link",
			"label": "Depends On",
			"options": "Background Job",
			"description": "Parent job dependency - this job waits until parent completes"
		},
		{
			"fieldname": "progress_section",
			"fieldtype": "Section Break",
			"label": "Progress"
		},
		{
			"fieldname": "progress",
			"fieldtype": "Percent",
			"label": "Progress",
			"default": "0",
			"description": "Completion percentage (0-100)"
		},
		{
			"fieldname": "progress_message",
			"fieldtype": "Data",
			"label": "Progress Message",
			"description": "Current step description"
		},
		{
			"fieldname": "column_break_progress",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "output_reference",
			"fieldtype": "Data",
			"label": "Output Reference",
			"description": "Result reference (file URL, docname)"
		},
		{
			"fieldname": "error_section",
			"fieldtype": "Section Break",
			"label": "Error Information",
			"collapsible": 1
		},
		{
			"fieldname": "error_message",
			"fieldtype": "Text",
			"label": "Error Message",
			"description": "Last error message"
		},
		{
			"fieldname": "error_type",
			"fieldtype": "Select",
			"label": "Error Type",
			"options": "\nTransient\nPermanent",
			"description": "Transient errors are retryable, permanent errors fail immediately"
		},
		{
			"fieldname": "retry_section",
			"fieldtype": "Section Break",
			"label": "Retry Information",
			"collapsible": 1
		},
		{
			"fieldname": "retry_count",
			"fieldtype": "Int",
			"label": "Retry Count",
			"default": "0",
			"description": "Number of retry attempts"
		},
		{
			"fieldname": "max_retries",
			"fieldtype": "Int",
			"label": "Max Retries",
			"default": "5",
			"description": "Maximum retry attempts"
		},
		{
			"fieldname": "column_break_retry",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "next_retry_at",
			"fieldtype": "Datetime",
			"label": "Next Retry At",
			"description": "Scheduled retry time"
		},
		{
			"fieldname": "parameters_section",
			"fieldtype": "Section Break",
			"label": "Parameters",
			"collapsible": 1
		},
		{
			"fieldname": "input_parameters",
			"fieldtype": "JSON",
			"label": "Input Parameters",
			"description": "Job-specific input data (JSON)"
		},
		{
			"fieldname": "job_hash",
			"fieldtype": "Data",
			"label": "Job Hash",
			"hidden": 1,
			"description": "Hash for duplicate detection"
		},
		{
			"fieldname": "timestamps_section",
			"fieldtype": "Section Break",
			"label": "Timestamps"
		},
		{
			"fieldname": "timeout_seconds",
			"fieldtype": "Int",
			"label": "Timeout (seconds)",
			"default": "300",
			"description": "Execution timeout"
		},
		{
			"fieldname": "created_at",
			"fieldtype": "Datetime",
			"label": "Created At",
			"in_list_view": 1,
			"description": "Job creation time"
		},
		{
			"fieldname": "started_at",
			"fieldtype": "Datetime",
			"label": "Started At",
			"description": "Execution start time"
		},
		{
			"fieldname": "column_break_timestamps",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "completed_at",
			"fieldtype": "Datetime",
			"label": "Completed At",
			"description": "Execution end time"
		},
		{
			"fieldname": "canceled_at",
			"fieldtype": "Datetime",
			"label": "Canceled At",
			"description": "Cancellation time"
		},
		{
			"fieldname": "canceled_by",
			"fieldtype": "Link",
			"label": "Canceled By",
			"options": "User",
			"description": "User who canceled"
		}
	],
	"index_web_pages_for_search": 0,
	"links": [
		{
			"link_doctype": "Job Execution Log",
			"link_fieldname": "background_job"
		}
	],
	"modified": "2025-12-15 00:00:00.000000",
	"modified_by": "Administrator",
	"module": "Dartwing Core",
	"name": "Background Job",
	"naming_rule": "By \"Naming Series\" field",
	"owner": "Administrator",
	"permissions": [
		{
			"create": 1,
			"delete": 1,
			"read": 1,
			"role": "System Manager",
			"write": 1
		},
		{
			"create": 1,
			"read": 1,
			"role": "Dartwing Admin",
			"write": 1
		},
		{
			"if_owner": 1,
			"read": 1,
			"role": "Dartwing User"
		}
	],
	"sort_field": "modified",
	"sort_order": "DESC",
	"states": [],
	"track_changes": 1,
	"user_permission_dependant_doctype": "Organization",
	"indexes": [
		{
			"fields": ["job_hash"]
		},
		{
			"fields": ["status", "next_retry_at"]
		},
		{
			"fields": ["status", "modified"]
		},
		{
			"fields": ["organization", "status"]
		}
	]
}
